// generated by gcg
package {{underline .Name}}
{{ $table := .Table }}

import (
	"github.com/guoanfamily/sqlx"
	_ "github.com/go-sql-driver/mysql"
)

var (
	dbInfo       *sqlx.DB
)

func GetDB() *sqlx.DB {
	if dbInfo != nil {
		return dbInfo
	}
    dbInfo, err := sqlx.Connect("mysql", "{{.Source}}&parseTime=True&loc=Local")
	if err != nil {
		panic(err)
	}
	dbInfo.SetMaxIdleConns(0)
	dbInfo.SetMaxOpenConns(100)
	dbInfo.Ping()
	return dbInfo
}

func CloseDB() {
	if dbInfo != nil {
		dbInfo.DB.Close()
	}
	dbInfo = nil
}
